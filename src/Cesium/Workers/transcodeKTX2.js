/**
 * @license
 * Cesium - https://github.com/CesiumGS/cesium
 * Version 1.125
 *
 * Copyright 2011-2022 Cesium Contributors
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * Columbus View (Pat. Pend.)
 *
 * Portions licensed separately.
 * See https://github.com/CesiumGS/cesium/blob/main/LICENSE.md for full licensing details.
 */

import{a as rn}from"./chunk-NPBBFQDL.js";import{a as u}from"./chunk-HO4GOHJF.js";import{a as se}from"./chunk-NOH5HXTJ.js";import{a as _n}from"./chunk-FL2EHGGP.js";import{b as nn}from"./chunk-F2Z6GE6G.js";import{a as Gt,c as ir,d as or,e as ge}from"./chunk-ABBJLCOR.js";var Rn=ir((st,Et)=>{var Vt=function(){var s=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return typeof __filename<"u"&&(s=s||__filename),function(T){T=T||{};var r=typeof T<"u"?T:{},C,M;r.ready=new Promise(function(e,t){C=e,M=t});var P={},F;for(F in r)r.hasOwnProperty(F)&&(P[F]=r[F]);var v=[],y="./this.program",D=function(e,t){throw t},N=!1,d=!1,E=!1,Q=!1;N=typeof window=="object",d=typeof importScripts=="function",E=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",Q=!N&&!E&&!d;var O="";function X(e){return r.locateFile?r.locateFile(e,O):O+e}var ie,le,W,J,g,Fe;E?(d?O=Gt("path").dirname(O)+"/":O=__dirname+"/",ie=function(t,n){return g||(g=Gt("fs")),Fe||(Fe=Gt("path")),t=Fe.normalize(t),g.readFileSync(t,n?null:"utf8")},W=function(t){var n=ie(t,!0);return n.buffer||(n=new Uint8Array(n)),Se(n.buffer),n},process.argv.length>1&&(y=process.argv[1].replace(/\\/g,"/")),v=process.argv.slice(2),process.on("uncaughtException",function(e){if(!(e instanceof rr))throw e}),process.on("unhandledRejection",Me),D=function(e){process.exit(e)},r.inspect=function(){return"[Emscripten Module object]"}):Q?(typeof read<"u"&&(ie=function(t){return read(t)}),W=function(t){var n;return typeof readbuffer=="function"?new Uint8Array(readbuffer(t)):(n=read(t,"binary"),Se(typeof n=="object"),n)},typeof scriptArgs<"u"?v=scriptArgs:typeof arguments<"u"&&(v=arguments),typeof quit=="function"&&(D=function(e){quit(e)}),typeof print<"u"&&(typeof console>"u"&&(console={}),console.log=print,console.warn=console.error=typeof printErr<"u"?printErr:print)):(N||d)&&(d?O=self.location.href:typeof document<"u"&&document.currentScript&&(O=document.currentScript.src),s&&(O=s),O.indexOf("blob:")!==0?O=O.substr(0,O.lastIndexOf("/")+1):O="",ie=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},d&&(W=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),le=function(e,t,n){var _=new XMLHttpRequest;_.open("GET",e,!0),_.responseType="arraybuffer",_.onload=function(){if(_.status==200||_.status==0&&_.response){t(_.response);return}n()},_.onerror=n,_.send(null)},J=function(e){document.title=e});var it=r.print||console.log.bind(console),ee=r.printErr||console.warn.bind(console);for(F in P)P.hasOwnProperty(F)&&(r[F]=P[F]);P=null,r.arguments&&(v=r.arguments),r.thisProgram&&(y=r.thisProgram),r.quit&&(D=r.quit);var De=0,Ie=function(e){De=e},ae;r.wasmBinary&&(ae=r.wasmBinary);var ot=r.noExitRuntime||!0;typeof WebAssembly!="object"&&Me("no native wasm support detected");var ce,de=!1,be;function Se(e,t){e||Me("Assertion failed: "+t)}var we=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function He(e,t,n){for(var _=t+n,i=t;e[i]&&!(i>=_);)++i;if(i-t>16&&e.subarray&&we)return we.decode(e.subarray(t,i));for(var c="";t<i;){var A=e[t++];if(!(A&128)){c+=String.fromCharCode(A);continue}var o=e[t++]&63;if((A&224)==192){c+=String.fromCharCode((A&31)<<6|o);continue}var R=e[t++]&63;if((A&240)==224?A=(A&15)<<12|o<<6|R:A=(A&7)<<18|o<<12|R<<6|e[t++]&63,A<65536)c+=String.fromCharCode(A);else{var f=A-65536;c+=String.fromCharCode(55296|f>>10,56320|f&1023)}}return c}function Xe(e,t){return e?He(I,e,t):""}function Rt(e,t,n,_){if(!(_>0))return 0;for(var i=n,c=n+_-1,A=0;A<e.length;++A){var o=e.charCodeAt(A);if(o>=55296&&o<=57343){var R=e.charCodeAt(++A);o=65536+((o&1023)<<10)|R&1023}if(o<=127){if(n>=c)break;t[n++]=o}else if(o<=2047){if(n+1>=c)break;t[n++]=192|o>>6,t[n++]=128|o&63}else if(o<=65535){if(n+2>=c)break;t[n++]=224|o>>12,t[n++]=128|o>>6&63,t[n++]=128|o&63}else{if(n+3>=c)break;t[n++]=240|o>>18,t[n++]=128|o>>12&63,t[n++]=128|o>>6&63,t[n++]=128|o&63}}return t[n]=0,n-i}function L(e,t,n){return Rt(e,I,t,n)}function j(e){for(var t=0,n=0;n<e.length;++n){var _=e.charCodeAt(n);_>=55296&&_<=57343&&(_=65536+((_&1023)<<10)|e.charCodeAt(++n)&1023),_<=127?++t:_<=2047?t+=2:_<=65535?t+=3:t+=4}return t}var Ae=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0;function at(e,t){for(var n=e,_=n>>1,i=_+t/2;!(_>=i)&&Ge[_];)++_;if(n=_<<1,n-e>32&&Ae)return Ae.decode(I.subarray(e,n));for(var c="",A=0;!(A>=t/2);++A){var o=Te[e+A*2>>1];if(o==0)break;c+=String.fromCharCode(o)}return c}function xe(e,t,n){if(n===void 0&&(n=2147483647),n<2)return 0;n-=2;for(var _=t,i=n<e.length*2?n/2:e.length,c=0;c<i;++c){var A=e.charCodeAt(c);Te[t>>1]=A,t+=2}return Te[t>>1]=0,t-_}function fn(e){return e.length*2}function un(e,t){for(var n=0,_="";!(n>=t/4);){var i=H[e+n*4>>2];if(i==0)break;if(++n,i>=65536){var c=i-65536;_+=String.fromCharCode(55296|c>>10,56320|c&1023)}else _+=String.fromCharCode(i)}return _}function On(e,t,n){if(n===void 0&&(n=2147483647),n<4)return 0;for(var _=t,i=_+n-4,c=0;c<e.length;++c){var A=e.charCodeAt(c);if(A>=55296&&A<=57343){var o=e.charCodeAt(++c);A=65536+((A&1023)<<10)|o&1023}if(H[t>>2]=A,t+=4,t+4>i)break}return H[t>>2]=0,t-_}function ln(e){for(var t=0,n=0;n<e.length;++n){var _=e.charCodeAt(n);_>=55296&&_<=57343&&++n,t+=4}return t}function Mn(e,t){return e%t>0&&(e+=t-e%t),e}var ct,ke,I,Te,Ge,H,Y,Pt,pt;function Ut(e){ct=e,r.HEAP8=ke=new Int8Array(e),r.HEAP16=Te=new Int16Array(e),r.HEAP32=H=new Int32Array(e),r.HEAPU8=I=new Uint8Array(e),r.HEAPU16=Ge=new Uint16Array(e),r.HEAPU32=Y=new Uint32Array(e),r.HEAPF32=Pt=new Float32Array(e),r.HEAPF64=pt=new Float64Array(e)}var ur=r.INITIAL_MEMORY||16777216,Ne,ht=[],vt=[],Bn=[],yt=[],Kn=!1;function Cn(){if(r.preRun)for(typeof r.preRun=="function"&&(r.preRun=[r.preRun]);r.preRun.length;)Gn(r.preRun.shift());$e(ht)}function Fn(){Kn=!0,$e(vt)}function dn(){$e(Bn)}function Sn(){if(r.postRun)for(typeof r.postRun=="function"&&(r.postRun=[r.postRun]);r.postRun.length;)Vn(r.postRun.shift());$e(yt)}function Gn(e){ht.unshift(e)}function Nn(e){vt.unshift(e)}function Vn(e){yt.unshift(e)}var fe=0,At=null,Ve=null;function En(e){fe++,r.monitorRunDependencies&&r.monitorRunDependencies(fe)}function Pn(e){if(fe--,r.monitorRunDependencies&&r.monitorRunDependencies(fe),fe==0&&(At!==null&&(clearInterval(At),At=null),Ve)){var t=Ve;Ve=null,t()}}r.preloadedImages={},r.preloadedAudios={};function Me(e){r.onAbort&&r.onAbort(e),e+="",ee(e),de=!0,be=1,e="abort("+e+"). Build with -s ASSERTIONS=1 for more info.";var t=new WebAssembly.RuntimeError(e);throw M(t),t}function gt(e,t){return String.prototype.startsWith?e.startsWith(t):e.indexOf(t)===0}var pn="data:application/octet-stream;base64,";function Lt(e){return gt(e,pn)}var Un="file://";function mt(e){return gt(e,Un)}var x="basis_transcoder.wasm";Lt(x)||(x=X(x));function Dt(e){try{if(e==x&&ae)return new Uint8Array(ae);if(W)return W(e);throw"both async and sync fetching of the wasm failed"}catch(t){Me(t)}}function hn(){if(!ae&&(N||d)){if(typeof fetch=="function"&&!mt(x))return fetch(x,{credentials:"same-origin"}).then(function(e){if(!e.ok)throw"failed to load wasm binary file at '"+x+"'";return e.arrayBuffer()}).catch(function(){return Dt(x)});if(le)return new Promise(function(e,t){le(x,function(n){e(new Uint8Array(n))},t)})}return Promise.resolve().then(function(){return Dt(x)})}function vn(){var e={a:er};function t(A,o){var R=A.exports;r.asm=R,ce=r.asm.K,Ut(ce.buffer),Ne=r.asm.O,Nn(r.asm.L),Pn("wasm-instantiate")}En("wasm-instantiate");function n(A){t(A.instance)}function _(A){return hn().then(function(o){var R=WebAssembly.instantiate(o,e);return R}).then(A,function(o){ee("failed to asynchronously prepare wasm: "+o),Me(o)})}function i(){return!ae&&typeof WebAssembly.instantiateStreaming=="function"&&!Lt(x)&&!mt(x)&&typeof fetch=="function"?fetch(x,{credentials:"same-origin"}).then(function(A){var o=WebAssembly.instantiateStreaming(A,e);return o.then(n,function(R){return ee("wasm streaming compile failed: "+R),ee("falling back to ArrayBuffer instantiation"),_(n)})}):_(n)}if(r.instantiateWasm)try{var c=r.instantiateWasm(e,t);return c}catch(A){return ee("Module.instantiateWasm callback failed with error: "+A),!1}return i().catch(M),{}}function $e(e){for(;e.length>0;){var t=e.shift();if(typeof t=="function"){t(r);continue}var n=t.func;typeof n=="number"?t.arg===void 0?Ne.get(n)():Ne.get(n)(t.arg):n(t.arg===void 0?null:t.arg)}}var We={};function je(e){for(;e.length;){var t=e.pop(),n=e.pop();n(t)}}function Ee(e){return this.fromWireType(Y[e>>2])}var Be={},ue={},ze={},yn=48,gn=57;function Ye(e){if(e===void 0)return"_unknown";e=e.replace(/[^a-zA-Z0-9_]/g,"$");var t=e.charCodeAt(0);return t>=yn&&t<=gn?"_"+e:e}function qe(e,t){return e=Ye(e),new Function("body","return function "+e+`() {
    "use strict";    return body.apply(this, arguments);
};
`)(t)}function Tt(e,t){var n=qe(t,function(_){this.name=t,this.message=_;var i=new Error(_).stack;i!==void 0&&(this.stack=this.toString()+`
`+i.replace(/^Error(:[^\n]*)?\n/,""))});return n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.prototype.toString=function(){return this.message===void 0?this.name:this.name+": "+this.message},n}var It=void 0;function Ze(e){throw new It(e)}function oe(e,t,n){e.forEach(function(o){ze[o]=t});function _(o){var R=n(o);R.length!==e.length&&Ze("Mismatched type converter count");for(var f=0;f<e.length;++f)q(e[f],R[f])}var i=new Array(t.length),c=[],A=0;t.forEach(function(o,R){ue.hasOwnProperty(o)?i[R]=ue[o]:(c.push(o),Be.hasOwnProperty(o)||(Be[o]=[]),Be[o].push(function(){i[R]=ue[o],++A,A===c.length&&_(i)}))}),c.length===0&&_(i)}function Ln(e){var t=We[e];delete We[e];var n=t.rawConstructor,_=t.rawDestructor,i=t.fields,c=i.map(function(A){return A.getterReturnType}).concat(i.map(function(A){return A.setterArgumentType}));oe([e],c,function(A){var o={};return i.forEach(function(R,f){var l=R.fieldName,B=A[f],G=R.getter,V=R.getterContext,h=A[f+i.length],b=R.setter,$=R.setterContext;o[l]={read:function(Z){return B.fromWireType(G(V,Z))},write:function(Z,ye){var re=[];b($,Z,h.toWireType(re,ye)),je(re)}}}),[{name:t.name,fromWireType:function(R){var f={};for(var l in o)f[l]=o[l].read(R);return _(R),f},toWireType:function(R,f){for(var l in o)if(!(l in f))throw new TypeError('Missing field:  "'+l+'"');var B=n();for(l in o)o[l].write(B,f[l]);return R!==null&&R.push(_,B),B},argPackAdvance:8,readValueFromPointer:Ee,destructorFunction:_}]})}function Qe(e){switch(e){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+e)}}function mn(){for(var e=new Array(256),t=0;t<256;++t)e[t]=String.fromCharCode(t);bt=e}var bt=void 0;function U(e){for(var t="",n=e;I[n];)t+=bt[I[n++]];return t}var Ke=void 0;function S(e){throw new Ke(e)}function q(e,t,n){if(n=n||{},!("argPackAdvance"in t))throw new TypeError("registerType registeredInstance requires argPackAdvance");var _=t.name;if(e||S('type "'+_+'" must have a positive integer typeid pointer'),ue.hasOwnProperty(e)){if(n.ignoreDuplicateRegistrations)return;S("Cannot register type '"+_+"' twice")}if(ue[e]=t,delete ze[e],Be.hasOwnProperty(e)){var i=Be[e];delete Be[e],i.forEach(function(c){c()})}}function Dn(e,t,n,_,i){var c=Qe(n);t=U(t),q(e,{name:t,fromWireType:function(A){return!!A},toWireType:function(A,o){return o?_:i},argPackAdvance:8,readValueFromPointer:function(A){var o;if(n===1)o=ke;else if(n===2)o=Te;else if(n===4)o=H;else throw new TypeError("Unknown boolean type size: "+t);return this.fromWireType(o[A>>c])},destructorFunction:null})}function In(e){if(!(this instanceof Re)||!(e instanceof Re))return!1;for(var t=this.$$.ptrType.registeredClass,n=this.$$.ptr,_=e.$$.ptrType.registeredClass,i=e.$$.ptr;t.baseClass;)n=t.upcast(n),t=t.baseClass;for(;_.baseClass;)i=_.upcast(i),_=_.baseClass;return t===_&&n===i}function bn(e){return{count:e.count,deleteScheduled:e.deleteScheduled,preservePointerOnDelete:e.preservePointerOnDelete,ptr:e.ptr,ptrType:e.ptrType,smartPtr:e.smartPtr,smartPtrType:e.smartPtrType}}function ft(e){function t(n){return n.$$.ptrType.registeredClass.name}S(t(e)+" instance already deleted")}var ut=!1;function wt(e){}function wn(e){e.smartPtr?e.smartPtrType.rawDestructor(e.smartPtr):e.ptrType.registeredClass.rawDestructor(e.ptr)}function Ht(e){e.count.value-=1;var t=e.count.value===0;t&&wn(e)}function Pe(e){return typeof FinalizationGroup>"u"?(Pe=function(t){return t},e):(ut=new FinalizationGroup(function(t){for(var n=t.next();!n.done;n=t.next()){var _=n.value;_.ptr?Ht(_):console.warn("object already deleted: "+_.ptr)}}),Pe=function(t){return ut.register(t,t.$$,t.$$),t},wt=function(t){ut.unregister(t.$$)},Pe(e))}function Hn(){if(this.$$.ptr||ft(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var e=Pe(Object.create(Object.getPrototypeOf(this),{$$:{value:bn(this.$$)}}));return e.$$.count.value+=1,e.$$.deleteScheduled=!1,e}function Xn(){this.$$.ptr||ft(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&S("Object already scheduled for deletion"),wt(this),Ht(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)}function xn(){return!this.$$.ptr}var pe=void 0,Ue=[];function Ot(){for(;Ue.length;){var e=Ue.pop();e.$$.deleteScheduled=!1,e.delete()}}function kn(){return this.$$.ptr||ft(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&S("Object already scheduled for deletion"),Ue.push(this),Ue.length===1&&pe&&pe(Ot),this.$$.deleteScheduled=!0,this}function $n(){Re.prototype.isAliasOf=In,Re.prototype.clone=Hn,Re.prototype.delete=Xn,Re.prototype.isDeleted=xn,Re.prototype.deleteLater=kn}function Re(){}var Xt={};function xt(e,t,n){if(e[t].overloadTable===void 0){var _=e[t];e[t]=function(){return e[t].overloadTable.hasOwnProperty(arguments.length)||S("Function '"+n+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+e[t].overloadTable+")!"),e[t].overloadTable[arguments.length].apply(this,arguments)},e[t].overloadTable=[],e[t].overloadTable[_.argCount]=_}}function lt(e,t,n){r.hasOwnProperty(e)?((n===void 0||r[e].overloadTable!==void 0&&r[e].overloadTable[n]!==void 0)&&S("Cannot register public name '"+e+"' twice"),xt(r,e,e),r.hasOwnProperty(n)&&S("Cannot register multiple overloads of a function with the same number of arguments ("+n+")!"),r[e].overloadTable[n]=t):(r[e]=t,n!==void 0&&(r[e].numArguments=n))}function Wn(e,t,n,_,i,c,A,o){this.name=e,this.constructor=t,this.instancePrototype=n,this.rawDestructor=_,this.baseClass=i,this.getActualType=c,this.upcast=A,this.downcast=o,this.pureVirtualFunctions=[]}function Mt(e,t,n){for(;t!==n;)t.upcast||S("Expected null or instance of "+n.name+", got an instance of "+t.name),e=t.upcast(e),t=t.baseClass;return e}function jn(e,t){if(t===null)return this.isReference&&S("null is not a valid "+this.name),0;t.$$||S('Cannot pass "'+Ce(t)+'" as a '+this.name),t.$$.ptr||S("Cannot pass deleted object as a pointer of type "+this.name);var n=t.$$.ptrType.registeredClass,_=Mt(t.$$.ptr,n,this.registeredClass);return _}function zn(e,t){var n;if(t===null)return this.isReference&&S("null is not a valid "+this.name),this.isSmartPointer?(n=this.rawConstructor(),e!==null&&e.push(this.rawDestructor,n),n):0;t.$$||S('Cannot pass "'+Ce(t)+'" as a '+this.name),t.$$.ptr||S("Cannot pass deleted object as a pointer of type "+this.name),!this.isConst&&t.$$.ptrType.isConst&&S("Cannot convert argument of type "+(t.$$.smartPtrType?t.$$.smartPtrType.name:t.$$.ptrType.name)+" to parameter type "+this.name);var _=t.$$.ptrType.registeredClass;if(n=Mt(t.$$.ptr,_,this.registeredClass),this.isSmartPointer)switch(t.$$.smartPtr===void 0&&S("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:t.$$.smartPtrType===this?n=t.$$.smartPtr:S("Cannot convert argument of type "+(t.$$.smartPtrType?t.$$.smartPtrType.name:t.$$.ptrType.name)+" to parameter type "+this.name);break;case 1:n=t.$$.smartPtr;break;case 2:if(t.$$.smartPtrType===this)n=t.$$.smartPtr;else{var i=t.clone();n=this.rawShare(n,ne(function(){i.delete()})),e!==null&&e.push(this.rawDestructor,n)}break;default:S("Unsupporting sharing policy")}return n}function Yn(e,t){if(t===null)return this.isReference&&S("null is not a valid "+this.name),0;t.$$||S('Cannot pass "'+Ce(t)+'" as a '+this.name),t.$$.ptr||S("Cannot pass deleted object as a pointer of type "+this.name),t.$$.ptrType.isConst&&S("Cannot convert argument of type "+t.$$.ptrType.name+" to parameter type "+this.name);var n=t.$$.ptrType.registeredClass,_=Mt(t.$$.ptr,n,this.registeredClass);return _}function qn(e){return this.rawGetPointee&&(e=this.rawGetPointee(e)),e}function Zn(e){this.rawDestructor&&this.rawDestructor(e)}function Qn(e){e!==null&&e.delete()}function kt(e,t,n){if(t===n)return e;if(n.baseClass===void 0)return null;var _=kt(e,t,n.baseClass);return _===null?null:n.downcast(_)}function Jn(){return Object.keys(he).length}function e_(){var e=[];for(var t in he)he.hasOwnProperty(t)&&e.push(he[t]);return e}function t_(e){pe=e,Ue.length&&pe&&pe(Ot)}function n_(){r.getInheritedInstanceCount=Jn,r.getLiveInheritedInstances=e_,r.flushPendingDeletes=Ot,r.setDelayFunction=t_}var he={};function __(e,t){for(t===void 0&&S("ptr should not be undefined");e.baseClass;)t=e.upcast(t),e=e.baseClass;return t}function r_(e,t){return t=__(e,t),he[t]}function Je(e,t){(!t.ptrType||!t.ptr)&&Ze("makeClassHandle requires ptr and ptrType");var n=!!t.smartPtrType,_=!!t.smartPtr;return n!==_&&Ze("Both smartPtrType and smartPtr must be specified"),t.count={value:1},Pe(Object.create(e,{$$:{value:t}}))}function s_(e){var t=this.getPointee(e);if(!t)return this.destructor(e),null;var n=r_(this.registeredClass,t);if(n!==void 0){if(n.$$.count.value===0)return n.$$.ptr=t,n.$$.smartPtr=e,n.clone();var _=n.clone();return this.destructor(e),_}function i(){return this.isSmartPointer?Je(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:t,smartPtrType:this,smartPtr:e}):Je(this.registeredClass.instancePrototype,{ptrType:this,ptr:e})}var c=this.registeredClass.getActualType(t),A=Xt[c];if(!A)return i.call(this);var o;this.isConst?o=A.constPointerType:o=A.pointerType;var R=kt(t,this.registeredClass,o.registeredClass);return R===null?i.call(this):this.isSmartPointer?Je(o.registeredClass.instancePrototype,{ptrType:o,ptr:R,smartPtrType:this,smartPtr:e}):Je(o.registeredClass.instancePrototype,{ptrType:o,ptr:R})}function i_(){te.prototype.getPointee=qn,te.prototype.destructor=Zn,te.prototype.argPackAdvance=8,te.prototype.readValueFromPointer=Ee,te.prototype.deleteObject=Qn,te.prototype.fromWireType=s_}function te(e,t,n,_,i,c,A,o,R,f,l){this.name=e,this.registeredClass=t,this.isReference=n,this.isConst=_,this.isSmartPointer=i,this.pointeeType=c,this.sharingPolicy=A,this.rawGetPointee=o,this.rawConstructor=R,this.rawShare=f,this.rawDestructor=l,!i&&t.baseClass===void 0?_?(this.toWireType=jn,this.destructorFunction=null):(this.toWireType=Yn,this.destructorFunction=null):this.toWireType=zn}function $t(e,t,n){r.hasOwnProperty(e)||Ze("Replacing nonexistant public symbol"),r[e].overloadTable!==void 0&&n!==void 0?r[e].overloadTable[n]=t:(r[e]=t,r[e].argCount=n)}function o_(e,t,n){var _=r["dynCall_"+e];return n&&n.length?_.apply(null,[t].concat(n)):_.call(null,t)}function R_(e,t,n){return e.indexOf("j")!=-1?o_(e,t,n):Ne.get(t).apply(null,n)}function a_(e,t){var n=[];return function(){n.length=arguments.length;for(var _=0;_<arguments.length;_++)n[_]=arguments[_];return R_(e,t,n)}}function z(e,t){e=U(e);function n(){return e.indexOf("j")!=-1?a_(e,t):Ne.get(t)}var _=n();return typeof _!="function"&&S("unknown function pointer with signature "+e+": "+t),_}var Wt=void 0;function jt(e){var t=Qt(e),n=U(t);return _e(t),n}function et(e,t){var n=[],_={};function i(c){if(!_[c]&&!ue[c]){if(ze[c]){ze[c].forEach(i);return}n.push(c),_[c]=!0}}throw t.forEach(i),new Wt(e+": "+n.map(jt).join([", "]))}function c_(e,t,n,_,i,c,A,o,R,f,l,B,G){l=U(l),c=z(i,c),o&&(o=z(A,o)),f&&(f=z(R,f)),G=z(B,G);var V=Ye(l);lt(V,function(){et("Cannot construct "+l+" due to unbound types",[_])}),oe([e,t,n],_?[_]:[],function(h){h=h[0];var b,$;_?(b=h.registeredClass,$=b.instancePrototype):$=Re.prototype;var Z=qe(V,function(){if(Object.getPrototypeOf(this)!==ye)throw new Ke("Use 'new' to construct "+l);if(re.constructor_body===void 0)throw new Ke(l+" has no accessible constructor");var tn=re.constructor_body[arguments.length];if(tn===void 0)throw new Ke("Tried to invoke ctor of "+l+" with invalid number of parameters ("+arguments.length+") - expected ("+Object.keys(re.constructor_body).toString()+") parameters instead!");return tn.apply(this,arguments)}),ye=Object.create($,{constructor:{value:Z}});Z.prototype=ye;var re=new Wn(l,Z,ye,G,b,c,o,f),sr=new te(l,re,!0,!1,!1),Jt=new te(l+"*",re,!1,!1,!1),en=new te(l+" const*",re,!1,!0,!1);return Xt[e]={pointerType:Jt,constPointerType:en},$t(V,Z),[sr,Jt,en]})}function Bt(e,t){for(var n=[],_=0;_<e;_++)n.push(H[(t>>2)+_]);return n}function A_(e,t,n,_,i,c){Se(t>0);var A=Bt(t,n);i=z(_,i);var o=[c],R=[];oe([],[e],function(f){f=f[0];var l="constructor "+f.name;if(f.registeredClass.constructor_body===void 0&&(f.registeredClass.constructor_body=[]),f.registeredClass.constructor_body[t-1]!==void 0)throw new Ke("Cannot register multiple constructors with identical number of parameters ("+(t-1)+") for class '"+f.name+"'! Overload resolution is currently only performed using the parameter count, not actual type info!");return f.registeredClass.constructor_body[t-1]=function(){et("Cannot construct "+f.name+" due to unbound types",A)},oe([],A,function(B){return f.registeredClass.constructor_body[t-1]=function(){arguments.length!==t-1&&S(l+" called with "+arguments.length+" arguments, expected "+(t-1)),R.length=0,o.length=t;for(var V=1;V<t;++V)o[V]=B[V].toWireType(R,arguments[V-1]);var h=i.apply(null,o);return je(R),B[0].fromWireType(h)},[]}),[]})}function zt(e,t){if(!(e instanceof Function))throw new TypeError("new_ called with constructor type "+typeof e+" which is not a function");var n=qe(e.name||"unknownFunctionName",function(){});n.prototype=e.prototype;var _=new n,i=e.apply(_,t);return i instanceof Object?i:_}function Yt(e,t,n,_,i){var c=t.length;c<2&&S("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var A=t[1]!==null&&n!==null,o=!1,R=1;R<t.length;++R)if(t[R]!==null&&t[R].destructorFunction===void 0){o=!0;break}for(var f=t[0].name!=="void",l="",B="",R=0;R<c-2;++R)l+=(R!==0?", ":"")+"arg"+R,B+=(R!==0?", ":"")+"arg"+R+"Wired";var G="return function "+Ye(e)+"("+l+`) {
if (arguments.length !== `+(c-2)+`) {
throwBindingError('function `+e+" called with ' + arguments.length + ' arguments, expected "+(c-2)+` args!');
}
`;o&&(G+=`var destructors = [];
`);var V=o?"destructors":"null",h=["throwBindingError","invoker","fn","runDestructors","retType","classParam"],b=[S,_,i,je,t[0],t[1]];A&&(G+="var thisWired = classParam.toWireType("+V+`, this);
`);for(var R=0;R<c-2;++R)G+="var arg"+R+"Wired = argType"+R+".toWireType("+V+", arg"+R+"); // "+t[R+2].name+`
`,h.push("argType"+R),b.push(t[R+2]);if(A&&(B="thisWired"+(B.length>0?", ":"")+B),G+=(f?"var rv = ":"")+"invoker(fn"+(B.length>0?", ":"")+B+`);
`,o)G+=`runDestructors(destructors);
`;else for(var R=A?1:2;R<t.length;++R){var $=R===1?"thisWired":"arg"+(R-2)+"Wired";t[R].destructorFunction!==null&&(G+=$+"_dtor("+$+"); // "+t[R].name+`
`,h.push($+"_dtor"),b.push(t[R].destructorFunction))}f&&(G+=`var ret = retType.fromWireType(rv);
return ret;
`),G+=`}
`,h.push(G);var Z=zt(Function,h).apply(null,b);return Z}function T_(e,t,n,_,i,c,A,o){var R=Bt(n,_);t=U(t),c=z(i,c),oe([],[e],function(f){f=f[0];var l=f.name+"."+t;o&&f.registeredClass.pureVirtualFunctions.push(t);function B(){et("Cannot call "+l+" due to unbound types",R)}var G=f.registeredClass.instancePrototype,V=G[t];return V===void 0||V.overloadTable===void 0&&V.className!==f.name&&V.argCount===n-2?(B.argCount=n-2,B.className=f.name,G[t]=B):(xt(G,t,l),G[t].overloadTable[n-2]=B),oe([],R,function(h){var b=Yt(l,h,f,c,A);return G[t].overloadTable===void 0?(b.argCount=n-2,G[t]=b):G[t].overloadTable[n-2]=b,[]}),[]})}function f_(e,t,n){e=U(e),oe([],[t],function(_){return _=_[0],r[e]=_.fromWireType(n),[]})}var Kt=[],k=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function Ct(e){e>4&&--k[e].refcount===0&&(k[e]=void 0,Kt.push(e))}function u_(){for(var e=0,t=5;t<k.length;++t)k[t]!==void 0&&++e;return e}function O_(){for(var e=5;e<k.length;++e)if(k[e]!==void 0)return k[e];return null}function l_(){r.count_emval_handles=u_,r.get_first_emval=O_}function ne(e){switch(e){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:{var t=Kt.length?Kt.pop():k.length;return k[t]={refcount:1,value:e},t}}}function M_(e,t){t=U(t),q(e,{name:t,fromWireType:function(n){var _=k[n].value;return Ct(n),_},toWireType:function(n,_){return ne(_)},argPackAdvance:8,readValueFromPointer:Ee,destructorFunction:null})}function B_(e,t,n){switch(t){case 0:return function(_){var i=n?ke:I;return this.fromWireType(i[_])};case 1:return function(_){var i=n?Te:Ge;return this.fromWireType(i[_>>1])};case 2:return function(_){var i=n?H:Y;return this.fromWireType(i[_>>2])};default:throw new TypeError("Unknown integer type: "+e)}}function K_(e,t,n,_){var i=Qe(n);t=U(t);function c(){}c.values={},q(e,{name:t,constructor:c,fromWireType:function(A){return this.constructor.values[A]},toWireType:function(A,o){return o.value},argPackAdvance:8,readValueFromPointer:B_(t,i,_),destructorFunction:null}),lt(t,c)}function tt(e,t){var n=ue[e];return n===void 0&&S(t+" has unknown type "+jt(e)),n}function C_(e,t,n){var _=tt(e,"enum");t=U(t);var i=_.constructor,c=Object.create(_.constructor.prototype,{value:{value:n},constructor:{value:qe(_.name+"_"+t,function(){})}});i.values[n]=c,i[t]=c}function Ce(e){if(e===null)return"null";var t=typeof e;return t==="object"||t==="array"||t==="function"?e.toString():""+e}function F_(e,t){switch(t){case 2:return function(n){return this.fromWireType(Pt[n>>2])};case 3:return function(n){return this.fromWireType(pt[n>>3])};default:throw new TypeError("Unknown float type: "+e)}}function d_(e,t,n){var _=Qe(n);t=U(t),q(e,{name:t,fromWireType:function(i){return i},toWireType:function(i,c){if(typeof c!="number"&&typeof c!="boolean")throw new TypeError('Cannot convert "'+Ce(c)+'" to '+this.name);return c},argPackAdvance:8,readValueFromPointer:F_(t,_),destructorFunction:null})}function S_(e,t,n,_,i,c){var A=Bt(t,n);e=U(e),i=z(_,i),lt(e,function(){et("Cannot call "+e+" due to unbound types",A)},t-1),oe([],A,function(o){var R=[o[0],null].concat(o.slice(1));return $t(e,Yt(e,R,null,i,c),t-1),[]})}function G_(e,t,n){switch(t){case 0:return n?function(i){return ke[i]}:function(i){return I[i]};case 1:return n?function(i){return Te[i>>1]}:function(i){return Ge[i>>1]};case 2:return n?function(i){return H[i>>2]}:function(i){return Y[i>>2]};default:throw new TypeError("Unknown integer type: "+e)}}function N_(e,t,n,_,i){t=U(t),i===-1&&(i=4294967295);var c=Qe(n),A=function(f){return f};if(_===0){var o=32-8*n;A=function(f){return f<<o>>>o}}var R=t.indexOf("unsigned")!=-1;q(e,{name:t,fromWireType:A,toWireType:function(f,l){if(typeof l!="number"&&typeof l!="boolean")throw new TypeError('Cannot convert "'+Ce(l)+'" to '+this.name);if(l<_||l>i)throw new TypeError('Passing a number "'+Ce(l)+'" from JS side to C/C++ side to an argument of type "'+t+'", which is outside the valid range ['+_+", "+i+"]!");return R?l>>>0:l|0},argPackAdvance:8,readValueFromPointer:G_(t,c,_!==0),destructorFunction:null})}function V_(e,t,n){var _=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],i=_[t];function c(A){A=A>>2;var o=Y,R=o[A],f=o[A+1];return new i(ct,f,R)}n=U(n),q(e,{name:n,fromWireType:c,argPackAdvance:8,readValueFromPointer:c},{ignoreDuplicateRegistrations:!0})}function E_(e,t){t=U(t);var n=t==="std::string";q(e,{name:t,fromWireType:function(_){var i=Y[_>>2],c;if(n)for(var A=_+4,o=0;o<=i;++o){var R=_+4+o;if(o==i||I[R]==0){var f=R-A,l=Xe(A,f);c===void 0?c=l:(c+="\0",c+=l),A=R+1}}else{for(var B=new Array(i),o=0;o<i;++o)B[o]=String.fromCharCode(I[_+4+o]);c=B.join("")}return _e(_),c},toWireType:function(_,i){i instanceof ArrayBuffer&&(i=new Uint8Array(i));var c,A=typeof i=="string";A||i instanceof Uint8Array||i instanceof Uint8ClampedArray||i instanceof Int8Array||S("Cannot pass non-string to std::string"),n&&A?c=function(){return j(i)}:c=function(){return i.length};var o=c(),R=dt(4+o+1);if(Y[R>>2]=o,n&&A)L(i,R+4,o+1);else if(A)for(var f=0;f<o;++f){var l=i.charCodeAt(f);l>255&&(_e(R),S("String has UTF-16 code units that do not fit in 8 bits")),I[R+4+f]=l}else for(var f=0;f<o;++f)I[R+4+f]=i[f];return _!==null&&_.push(_e,R),R},argPackAdvance:8,readValueFromPointer:Ee,destructorFunction:function(_){_e(_)}})}function P_(e,t,n){n=U(n);var _,i,c,A,o;t===2?(_=at,i=xe,A=fn,c=function(){return Ge},o=1):t===4&&(_=un,i=On,A=ln,c=function(){return Y},o=2),q(e,{name:n,fromWireType:function(R){for(var f=Y[R>>2],l=c(),B,G=R+4,V=0;V<=f;++V){var h=R+4+V*t;if(V==f||l[h>>o]==0){var b=h-G,$=_(G,b);B===void 0?B=$:(B+="\0",B+=$),G=h+t}}return _e(R),B},toWireType:function(R,f){typeof f!="string"&&S("Cannot pass non-string to C++ string type "+n);var l=A(f),B=dt(4+l+t);return Y[B>>2]=l>>o,i(f,B+4,l+t),R!==null&&R.push(_e,B),B},argPackAdvance:8,readValueFromPointer:Ee,destructorFunction:function(R){_e(R)}})}function p_(e,t,n,_,i,c){We[e]={name:U(t),rawConstructor:z(n,_),rawDestructor:z(i,c),fields:[]}}function U_(e,t,n,_,i,c,A,o,R,f){We[e].fields.push({fieldName:U(t),getterReturnType:n,getter:z(_,i),getterContext:c,setterArgumentType:A,setter:z(o,R),setterContext:f})}function h_(e,t){t=U(t),q(e,{isVoid:!0,name:t,argPackAdvance:0,fromWireType:function(){},toWireType:function(n,_){}})}function ve(e){return e||S("Cannot use deleted val. handle = "+e),k[e].value}function v_(e,t,n){e=ve(e),t=tt(t,"emval::as");var _=[],i=ne(_);return H[n>>2]=i,t.toWireType(_,e)}var y_={};function nt(e){var t=y_[e];return t===void 0?U(e):t}var Ft=[];function g_(e,t,n,_){e=Ft[e],t=ve(t),n=nt(n),e(t,n,null,_)}function qt(){return typeof globalThis=="object"?globalThis:function(){return Function}()("return this")()}function L_(e){return e===0?ne(qt()):(e=nt(e),ne(qt()[e]))}function m_(e){var t=Ft.length;return Ft.push(e),t}function D_(e,t){for(var n=new Array(e),_=0;_<e;++_)n[_]=tt(H[(t>>2)+_],"parameter "+_);return n}function I_(e,t){for(var n=D_(e,t),_=n[0],i=_.name+"_$"+n.slice(1).map(function(V){return V.name}).join("_")+"$",c=["retType"],A=[_],o="",R=0;R<e-1;++R)o+=(R!==0?", ":"")+"arg"+R,c.push("argType"+R),A.push(n[1+R]);for(var f=Ye("methodCaller_"+i),l="return function "+f+`(handle, name, destructors, args) {
`,B=0,R=0;R<e-1;++R)l+="    var arg"+R+" = argType"+R+".readValueFromPointer(args"+(B?"+"+B:"")+`);
`,B+=n[R+1].argPackAdvance;l+="    var rv = handle[name]("+o+`);
`;for(var R=0;R<e-1;++R)n[R+1].deleteObject&&(l+="    argType"+R+".deleteObject(arg"+R+`);
`);_.isVoid||(l+=`    return retType.toWireType(destructors, rv);
`),l+=`};
`,c.push(l);var G=zt(Function,c).apply(null,A);return m_(G)}function b_(e){return e=nt(e),ne(r[e])}function w_(e,t){return e=ve(e),t=ve(t),ne(e[t])}function H_(e){e>4&&(k[e].refcount+=1)}function X_(e){for(var t="",n=0;n<e;++n)t+=(n!==0?", ":"")+"arg"+n;for(var _="return function emval_allocator_"+e+`(constructor, argTypes, args) {
`,n=0;n<e;++n)_+="var argType"+n+" = requireRegisteredType(Module['HEAP32'][(argTypes >>> 2) + "+n+'], "parameter '+n+`");
var arg`+n+" = argType"+n+`.readValueFromPointer(args);
args += argType`+n+`['argPackAdvance'];
`;return _+="var obj = new constructor("+t+`);
return __emval_register(obj);
}
`,new Function("requireRegisteredType","Module","__emval_register",_)(tt,r,ne)}var Zt={};function x_(e,t,n,_){e=ve(e);var i=Zt[t];return i||(i=X_(t),Zt[t]=i),i(e,n,_)}function k_(e){return ne(nt(e))}function $_(e){var t=k[e].value;je(t),Ct(e)}function W_(){Me()}function j_(e,t,n){I.copyWithin(e,t,t+n)}function z_(e){try{return ce.grow(e-ct.byteLength+65535>>>16),Ut(ce.buffer),1}catch{}}function Y_(e){var t=I.length;e=e>>>0;var n=2147483648;if(e>n)return!1;for(var _=1;_<=4;_*=2){var i=t*(1+.2/_);i=Math.min(i,e+100663296);var c=Math.min(n,Mn(Math.max(e,i),65536)),A=z_(c);if(A)return!0}return!1}var _t={mappings:{},buffers:[null,[],[]],printChar:function(e,t){var n=_t.buffers[e];t===0||t===10?((e===1?it:ee)(He(n,0)),n.length=0):n.push(t)},varargs:void 0,get:function(){_t.varargs+=4;var e=H[_t.varargs-4>>2];return e},getStr:function(e){var t=Xe(e);return t},get64:function(e,t){return e}};function q_(e){return 0}function Z_(e,t,n,_,i){}function Q_(e,t,n,_){for(var i=0,c=0;c<n;c++){for(var A=H[t+c*8>>2],o=H[t+(c*8+4)>>2],R=0;R<o;R++)_t.printChar(e,I[A+R]);i+=o}return H[_>>2]=i,0}function J_(e){Ie(e|0)}It=r.InternalError=Tt(Error,"InternalError"),mn(),Ke=r.BindingError=Tt(Error,"BindingError"),$n(),i_(),n_(),Wt=r.UnboundTypeError=Tt(Error,"UnboundTypeError"),l_();var er={t:Ln,I:Dn,x:c_,w:A_,d:T_,k:f_,H:M_,n:K_,a:C_,A:d_,i:S_,j:N_,h:V_,B:E_,v:P_,u:p_,c:U_,J:h_,m:v_,s:g_,b:Ct,y:L_,p:I_,r:b_,e:w_,g:H_,q:x_,f:k_,l:$_,o:W_,E:j_,F:Y_,G:q_,C:Z_,z:Q_,D:J_},Or=vn(),tr=r.___wasm_call_ctors=function(){return(tr=r.___wasm_call_ctors=r.asm.L).apply(null,arguments)},dt=r._malloc=function(){return(dt=r._malloc=r.asm.M).apply(null,arguments)},_e=r._free=function(){return(_e=r._free=r.asm.N).apply(null,arguments)},Qt=r.___getTypeName=function(){return(Qt=r.___getTypeName=r.asm.P).apply(null,arguments)},nr=r.___embind_register_native_and_builtin_types=function(){return(nr=r.___embind_register_native_and_builtin_types=r.asm.Q).apply(null,arguments)},_r=r.dynCall_jiji=function(){return(_r=r.dynCall_jiji=r.asm.R).apply(null,arguments)},rt;function rr(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}Ve=function e(){rt||St(),rt||(Ve=e)};function St(e){if(e=e||v,fe>0||(Cn(),fe>0))return;function t(){rt||(rt=!0,r.calledRun=!0,!de&&(Fn(),dn(),C(r),r.onRuntimeInitialized&&r.onRuntimeInitialized(),Sn()))}r.setStatus?(r.setStatus("Running..."),setTimeout(function(){setTimeout(function(){r.setStatus("")},1),t()},1)):t()}if(r.run=St,r.preInit)for(typeof r.preInit=="function"&&(r.preInit=[r.preInit]);r.preInit.length>0;)r.preInit.pop()();return St(),T.ready}}();typeof st=="object"&&typeof Et=="object"?Et.exports=Vt:typeof define=="function"&&define.amd?define([],function(){return Vt}):typeof st=="object"&&(st.BASIS=Vt)});var K={UNSIGNED_BYTE:u.UNSIGNED_BYTE,UNSIGNED_SHORT:u.UNSIGNED_SHORT,UNSIGNED_INT:u.UNSIGNED_INT,FLOAT:u.FLOAT,HALF_FLOAT:u.HALF_FLOAT_OES,UNSIGNED_INT_24_8:u.UNSIGNED_INT_24_8,UNSIGNED_SHORT_4_4_4_4:u.UNSIGNED_SHORT_4_4_4_4,UNSIGNED_SHORT_5_5_5_1:u.UNSIGNED_SHORT_5_5_5_1,UNSIGNED_SHORT_5_6_5:u.UNSIGNED_SHORT_5_6_5};K.toWebGLConstant=function(s,T){switch(s){case K.UNSIGNED_BYTE:return u.UNSIGNED_BYTE;case K.UNSIGNED_SHORT:return u.UNSIGNED_SHORT;case K.UNSIGNED_INT:return u.UNSIGNED_INT;case K.FLOAT:return u.FLOAT;case K.HALF_FLOAT:return T.webgl2?u.HALF_FLOAT:u.HALF_FLOAT_OES;case K.UNSIGNED_INT_24_8:return u.UNSIGNED_INT_24_8;case K.UNSIGNED_SHORT_4_4_4_4:return u.UNSIGNED_SHORT_4_4_4_4;case K.UNSIGNED_SHORT_5_5_5_1:return u.UNSIGNED_SHORT_5_5_5_1;case K.UNSIGNED_SHORT_5_6_5:return K.UNSIGNED_SHORT_5_6_5}};K.isPacked=function(s){return s===K.UNSIGNED_INT_24_8||s===K.UNSIGNED_SHORT_4_4_4_4||s===K.UNSIGNED_SHORT_5_5_5_1||s===K.UNSIGNED_SHORT_5_6_5};K.sizeInBytes=function(s){switch(s){case K.UNSIGNED_BYTE:return 1;case K.UNSIGNED_SHORT:case K.UNSIGNED_SHORT_4_4_4_4:case K.UNSIGNED_SHORT_5_5_5_1:case K.UNSIGNED_SHORT_5_6_5:case K.HALF_FLOAT:return 2;case K.UNSIGNED_INT:case K.FLOAT:case K.UNSIGNED_INT_24_8:return 4}};K.validate=function(s){return s===K.UNSIGNED_BYTE||s===K.UNSIGNED_SHORT||s===K.UNSIGNED_INT||s===K.FLOAT||s===K.HALF_FLOAT||s===K.UNSIGNED_INT_24_8||s===K.UNSIGNED_SHORT_4_4_4_4||s===K.UNSIGNED_SHORT_5_5_5_1||s===K.UNSIGNED_SHORT_5_6_5};K.getTypedArrayConstructor=function(s){let T=K.sizeInBytes(s);return T===Uint8Array.BYTES_PER_ELEMENT?Uint8Array:T===Uint16Array.BYTES_PER_ELEMENT?Uint16Array:T===Float32Array.BYTES_PER_ELEMENT&&s===K.FLOAT?Float32Array:Uint32Array};var m=Object.freeze(K);var a={DEPTH_COMPONENT:u.DEPTH_COMPONENT,DEPTH_STENCIL:u.DEPTH_STENCIL,ALPHA:u.ALPHA,RED:u.RED,RG:u.RG,RGB:u.RGB,RGBA:u.RGBA,RED_INTEGER:u.RED_INTEGER,RG_INTEGER:u.RG_INTEGER,RGB_INTEGER:u.RGB_INTEGER,RGBA_INTEGER:u.RGBA_INTEGER,LUMINANCE:u.LUMINANCE,LUMINANCE_ALPHA:u.LUMINANCE_ALPHA,RGB_DXT1:u.COMPRESSED_RGB_S3TC_DXT1_EXT,RGBA_DXT1:u.COMPRESSED_RGBA_S3TC_DXT1_EXT,RGBA_DXT3:u.COMPRESSED_RGBA_S3TC_DXT3_EXT,RGBA_DXT5:u.COMPRESSED_RGBA_S3TC_DXT5_EXT,RGB_PVRTC_4BPPV1:u.COMPRESSED_RGB_PVRTC_4BPPV1_IMG,RGB_PVRTC_2BPPV1:u.COMPRESSED_RGB_PVRTC_2BPPV1_IMG,RGBA_PVRTC_4BPPV1:u.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG,RGBA_PVRTC_2BPPV1:u.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG,RGBA_ASTC:u.COMPRESSED_RGBA_ASTC_4x4_WEBGL,RGB_ETC1:u.COMPRESSED_RGB_ETC1_WEBGL,RGB8_ETC2:u.COMPRESSED_RGB8_ETC2,RGBA8_ETC2_EAC:u.COMPRESSED_RGBA8_ETC2_EAC,RGBA_BC7:u.COMPRESSED_RGBA_BPTC_UNORM};a.componentsLength=function(s){switch(s){case a.RGB:case a.RGB_INTEGER:return 3;case a.RGBA:case a.RGBA_INTEGER:return 4;case a.LUMINANCE_ALPHA:case a.RG:case a.RG_INTEGER:return 2;case a.ALPHA:case a.RED:case a.RED_INTEGER:case a.LUMINANCE:return 1;default:return 1}};a.validate=function(s){return s===a.DEPTH_COMPONENT||s===a.DEPTH_STENCIL||s===a.ALPHA||s===a.RED||s===a.RG||s===a.RGB||s===a.RGBA||s===a.RED_INTEGER||s===a.RG_INTEGER||s===a.RGB_INTEGER||s===a.RGBA_INTEGER||s===a.LUMINANCE||s===a.LUMINANCE_ALPHA||s===a.RGB_DXT1||s===a.RGBA_DXT1||s===a.RGBA_DXT3||s===a.RGBA_DXT5||s===a.RGB_PVRTC_4BPPV1||s===a.RGB_PVRTC_2BPPV1||s===a.RGBA_PVRTC_4BPPV1||s===a.RGBA_PVRTC_2BPPV1||s===a.RGBA_ASTC||s===a.RGB_ETC1||s===a.RGB8_ETC2||s===a.RGBA8_ETC2_EAC||s===a.RGBA_BC7};a.isColorFormat=function(s){return s===a.RED||s===a.ALPHA||s===a.RGB||s===a.RGBA||s===a.LUMINANCE||s===a.LUMINANCE_ALPHA};a.isDepthFormat=function(s){return s===a.DEPTH_COMPONENT||s===a.DEPTH_STENCIL};a.isCompressedFormat=function(s){return s===a.RGB_DXT1||s===a.RGBA_DXT1||s===a.RGBA_DXT3||s===a.RGBA_DXT5||s===a.RGB_PVRTC_4BPPV1||s===a.RGB_PVRTC_2BPPV1||s===a.RGBA_PVRTC_4BPPV1||s===a.RGBA_PVRTC_2BPPV1||s===a.RGBA_ASTC||s===a.RGB_ETC1||s===a.RGB8_ETC2||s===a.RGBA8_ETC2_EAC||s===a.RGBA_BC7};a.isDXTFormat=function(s){return s===a.RGB_DXT1||s===a.RGBA_DXT1||s===a.RGBA_DXT3||s===a.RGBA_DXT5};a.isPVRTCFormat=function(s){return s===a.RGB_PVRTC_4BPPV1||s===a.RGB_PVRTC_2BPPV1||s===a.RGBA_PVRTC_4BPPV1||s===a.RGBA_PVRTC_2BPPV1};a.isASTCFormat=function(s){return s===a.RGBA_ASTC};a.isETC1Format=function(s){return s===a.RGB_ETC1};a.isETC2Format=function(s){return s===a.RGB8_ETC2||s===a.RGBA8_ETC2_EAC};a.isBC7Format=function(s){return s===a.RGBA_BC7};a.compressedTextureSizeInBytes=function(s,T,r){switch(s){case a.RGB_DXT1:case a.RGBA_DXT1:case a.RGB_ETC1:case a.RGB8_ETC2:return Math.floor((T+3)/4)*Math.floor((r+3)/4)*8;case a.RGBA_DXT3:case a.RGBA_DXT5:case a.RGBA_ASTC:case a.RGBA8_ETC2_EAC:return Math.floor((T+3)/4)*Math.floor((r+3)/4)*16;case a.RGB_PVRTC_4BPPV1:case a.RGBA_PVRTC_4BPPV1:return Math.floor((Math.max(T,8)*Math.max(r,8)*4+7)/8);case a.RGB_PVRTC_2BPPV1:case a.RGBA_PVRTC_2BPPV1:return Math.floor((Math.max(T,16)*Math.max(r,8)*2+7)/8);case a.RGBA_BC7:return Math.ceil(T/4)*Math.ceil(r/4)*16;default:return 0}};a.textureSizeInBytes=function(s,T,r,C){let M=a.componentsLength(s);return m.isPacked(T)&&(M=1),M*m.sizeInBytes(T)*r*C};a.alignmentInBytes=function(s,T,r){let C=a.textureSizeInBytes(s,T,r,1)%4;return C===0?4:C===2?2:1};a.createTypedArray=function(s,T,r,C){let M=m.getTypedArrayConstructor(T),P=a.componentsLength(s)*r*C;return new M(P)};a.flipY=function(s,T,r,C,M){if(M===1)return s;let P=a.createTypedArray(T,r,C,M),F=a.componentsLength(T),v=C*F;for(let y=0;y<M;++y){let D=y*C*F,N=(M-y-1)*C*F;for(let d=0;d<v;++d)P[N+d]=s[D+d]}return P};a.toInternalFormat=function(s,T,r){if(!r.webgl2)return s;if(s===a.DEPTH_STENCIL)return u.DEPTH24_STENCIL8;if(s===a.DEPTH_COMPONENT){if(T===m.UNSIGNED_SHORT)return u.DEPTH_COMPONENT16;if(T===m.UNSIGNED_INT)return u.DEPTH_COMPONENT24}if(T===m.FLOAT)switch(s){case a.RGBA:return u.RGBA32F;case a.RGB:return u.RGB32F;case a.RG:return u.RG32F;case a.RED:return u.R32F}if(T===m.HALF_FLOAT)switch(s){case a.RGBA:return u.RGBA16F;case a.RGB:return u.RGB16F;case a.RG:return u.RG16F;case a.RED:return u.R16F}if(T===m.INT)switch(s){case a.RGBA_INTEGER:return u.RGBA32I;case a.RGB_INTEGER:return u.RGB32I;case a.RG_INTEGER:return u.RG32I;case a.RED_INTEGER:return u.R32I}if(T===m.UNSIGNED_INT)switch(s){case a.RGBA_INTEGER:return u.RGBA32UI;case a.RGB_INTEGER:return u.RGB32UI;case a.RG_INTEGER:return u.RG32UI;case a.RED_INTEGER:return u.R32UI}return s};var p=Object.freeze(a);var Rr={VK_FORMAT_UNDEFINED:0,VK_FORMAT_R4G4_UNORM_PACK8:1,VK_FORMAT_R4G4B4A4_UNORM_PACK16:2,VK_FORMAT_B4G4R4A4_UNORM_PACK16:3,VK_FORMAT_R5G6B5_UNORM_PACK16:4,VK_FORMAT_B5G6R5_UNORM_PACK16:5,VK_FORMAT_R5G5B5A1_UNORM_PACK16:6,VK_FORMAT_B5G5R5A1_UNORM_PACK16:7,VK_FORMAT_A1R5G5B5_UNORM_PACK16:8,VK_FORMAT_R8_UNORM:9,VK_FORMAT_R8_SNORM:10,VK_FORMAT_R8_USCALED:11,VK_FORMAT_R8_SSCALED:12,VK_FORMAT_R8_UINT:13,VK_FORMAT_R8_SINT:14,VK_FORMAT_R8_SRGB:15,VK_FORMAT_R8G8_UNORM:16,VK_FORMAT_R8G8_SNORM:17,VK_FORMAT_R8G8_USCALED:18,VK_FORMAT_R8G8_SSCALED:19,VK_FORMAT_R8G8_UINT:20,VK_FORMAT_R8G8_SINT:21,VK_FORMAT_R8G8_SRGB:22,VK_FORMAT_R8G8B8_UNORM:23,VK_FORMAT_R8G8B8_SNORM:24,VK_FORMAT_R8G8B8_USCALED:25,VK_FORMAT_R8G8B8_SSCALED:26,VK_FORMAT_R8G8B8_UINT:27,VK_FORMAT_R8G8B8_SINT:28,VK_FORMAT_R8G8B8_SRGB:29,VK_FORMAT_B8G8R8_UNORM:30,VK_FORMAT_B8G8R8_SNORM:31,VK_FORMAT_B8G8R8_USCALED:32,VK_FORMAT_B8G8R8_SSCALED:33,VK_FORMAT_B8G8R8_UINT:34,VK_FORMAT_B8G8R8_SINT:35,VK_FORMAT_B8G8R8_SRGB:36,VK_FORMAT_R8G8B8A8_UNORM:37,VK_FORMAT_R8G8B8A8_SNORM:38,VK_FORMAT_R8G8B8A8_USCALED:39,VK_FORMAT_R8G8B8A8_SSCALED:40,VK_FORMAT_R8G8B8A8_UINT:41,VK_FORMAT_R8G8B8A8_SINT:42,VK_FORMAT_R8G8B8A8_SRGB:43,VK_FORMAT_B8G8R8A8_UNORM:44,VK_FORMAT_B8G8R8A8_SNORM:45,VK_FORMAT_B8G8R8A8_USCALED:46,VK_FORMAT_B8G8R8A8_SSCALED:47,VK_FORMAT_B8G8R8A8_UINT:48,VK_FORMAT_B8G8R8A8_SINT:49,VK_FORMAT_B8G8R8A8_SRGB:50,VK_FORMAT_A8B8G8R8_UNORM_PACK32:51,VK_FORMAT_A8B8G8R8_SNORM_PACK32:52,VK_FORMAT_A8B8G8R8_USCALED_PACK32:53,VK_FORMAT_A8B8G8R8_SSCALED_PACK32:54,VK_FORMAT_A8B8G8R8_UINT_PACK32:55,VK_FORMAT_A8B8G8R8_SINT_PACK32:56,VK_FORMAT_A8B8G8R8_SRGB_PACK32:57,VK_FORMAT_A2R10G10B10_UNORM_PACK32:58,VK_FORMAT_A2R10G10B10_SNORM_PACK32:59,VK_FORMAT_A2R10G10B10_USCALED_PACK32:60,VK_FORMAT_A2R10G10B10_SSCALED_PACK32:61,VK_FORMAT_A2R10G10B10_UINT_PACK32:62,VK_FORMAT_A2R10G10B10_SINT_PACK32:63,VK_FORMAT_A2B10G10R10_UNORM_PACK32:64,VK_FORMAT_A2B10G10R10_SNORM_PACK32:65,VK_FORMAT_A2B10G10R10_USCALED_PACK32:66,VK_FORMAT_A2B10G10R10_SSCALED_PACK32:67,VK_FORMAT_A2B10G10R10_UINT_PACK32:68,VK_FORMAT_A2B10G10R10_SINT_PACK32:69,VK_FORMAT_R16_UNORM:70,VK_FORMAT_R16_SNORM:71,VK_FORMAT_R16_USCALED:72,VK_FORMAT_R16_SSCALED:73,VK_FORMAT_R16_UINT:74,VK_FORMAT_R16_SINT:75,VK_FORMAT_R16_SFLOAT:76,VK_FORMAT_R16G16_UNORM:77,VK_FORMAT_R16G16_SNORM:78,VK_FORMAT_R16G16_USCALED:79,VK_FORMAT_R16G16_SSCALED:80,VK_FORMAT_R16G16_UINT:81,VK_FORMAT_R16G16_SINT:82,VK_FORMAT_R16G16_SFLOAT:83,VK_FORMAT_R16G16B16_UNORM:84,VK_FORMAT_R16G16B16_SNORM:85,VK_FORMAT_R16G16B16_USCALED:86,VK_FORMAT_R16G16B16_SSCALED:87,VK_FORMAT_R16G16B16_UINT:88,VK_FORMAT_R16G16B16_SINT:89,VK_FORMAT_R16G16B16_SFLOAT:90,VK_FORMAT_R16G16B16A16_UNORM:91,VK_FORMAT_R16G16B16A16_SNORM:92,VK_FORMAT_R16G16B16A16_USCALED:93,VK_FORMAT_R16G16B16A16_SSCALED:94,VK_FORMAT_R16G16B16A16_UINT:95,VK_FORMAT_R16G16B16A16_SINT:96,VK_FORMAT_R16G16B16A16_SFLOAT:97,VK_FORMAT_R32_UINT:98,VK_FORMAT_R32_SINT:99,VK_FORMAT_R32_SFLOAT:100,VK_FORMAT_R32G32_UINT:101,VK_FORMAT_R32G32_SINT:102,VK_FORMAT_R32G32_SFLOAT:103,VK_FORMAT_R32G32B32_UINT:104,VK_FORMAT_R32G32B32_SINT:105,VK_FORMAT_R32G32B32_SFLOAT:106,VK_FORMAT_R32G32B32A32_UINT:107,VK_FORMAT_R32G32B32A32_SINT:108,VK_FORMAT_R32G32B32A32_SFLOAT:109,VK_FORMAT_R64_UINT:110,VK_FORMAT_R64_SINT:111,VK_FORMAT_R64_SFLOAT:112,VK_FORMAT_R64G64_UINT:113,VK_FORMAT_R64G64_SINT:114,VK_FORMAT_R64G64_SFLOAT:115,VK_FORMAT_R64G64B64_UINT:116,VK_FORMAT_R64G64B64_SINT:117,VK_FORMAT_R64G64B64_SFLOAT:118,VK_FORMAT_R64G64B64A64_UINT:119,VK_FORMAT_R64G64B64A64_SINT:120,VK_FORMAT_R64G64B64A64_SFLOAT:121,VK_FORMAT_B10G11R11_UFLOAT_PACK32:122,VK_FORMAT_E5B9G9R9_UFLOAT_PACK32:123,VK_FORMAT_D16_UNORM:124,VK_FORMAT_X8_D24_UNORM_PACK32:125,VK_FORMAT_D32_SFLOAT:126,VK_FORMAT_S8_UINT:127,VK_FORMAT_D16_UNORM_S8_UINT:128,VK_FORMAT_D24_UNORM_S8_UINT:129,VK_FORMAT_D32_SFLOAT_S8_UINT:130,VK_FORMAT_BC1_RGB_UNORM_BLOCK:131,VK_FORMAT_BC1_RGB_SRGB_BLOCK:132,VK_FORMAT_BC1_RGBA_UNORM_BLOCK:133,VK_FORMAT_BC1_RGBA_SRGB_BLOCK:134,VK_FORMAT_BC2_UNORM_BLOCK:135,VK_FORMAT_BC2_SRGB_BLOCK:136,VK_FORMAT_BC3_UNORM_BLOCK:137,VK_FORMAT_BC3_SRGB_BLOCK:138,VK_FORMAT_BC4_UNORM_BLOCK:139,VK_FORMAT_BC4_SNORM_BLOCK:140,VK_FORMAT_BC5_UNORM_BLOCK:141,VK_FORMAT_BC5_SNORM_BLOCK:142,VK_FORMAT_BC6H_UFLOAT_BLOCK:143,VK_FORMAT_BC6H_SFLOAT_BLOCK:144,VK_FORMAT_BC7_UNORM_BLOCK:145,VK_FORMAT_BC7_SRGB_BLOCK:146,VK_FORMAT_ETC2_R8G8B8_UNORM_BLOCK:147,VK_FORMAT_ETC2_R8G8B8_SRGB_BLOCK:148,VK_FORMAT_ETC2_R8G8B8A1_UNORM_BLOCK:149,VK_FORMAT_ETC2_R8G8B8A1_SRGB_BLOCK:150,VK_FORMAT_ETC2_R8G8B8A8_UNORM_BLOCK:151,VK_FORMAT_ETC2_R8G8B8A8_SRGB_BLOCK:152,VK_FORMAT_EAC_R11_UNORM_BLOCK:153,VK_FORMAT_EAC_R11_SNORM_BLOCK:154,VK_FORMAT_EAC_R11G11_UNORM_BLOCK:155,VK_FORMAT_EAC_R11G11_SNORM_BLOCK:156,VK_FORMAT_ASTC_4x4_UNORM_BLOCK:157,VK_FORMAT_ASTC_4x4_SRGB_BLOCK:158,VK_FORMAT_ASTC_5x4_UNORM_BLOCK:159,VK_FORMAT_ASTC_5x4_SRGB_BLOCK:160,VK_FORMAT_ASTC_5x5_UNORM_BLOCK:161,VK_FORMAT_ASTC_5x5_SRGB_BLOCK:162,VK_FORMAT_ASTC_6x5_UNORM_BLOCK:163,VK_FORMAT_ASTC_6x5_SRGB_BLOCK:164,VK_FORMAT_ASTC_6x6_UNORM_BLOCK:165,VK_FORMAT_ASTC_6x6_SRGB_BLOCK:166,VK_FORMAT_ASTC_8x5_UNORM_BLOCK:167,VK_FORMAT_ASTC_8x5_SRGB_BLOCK:168,VK_FORMAT_ASTC_8x6_UNORM_BLOCK:169,VK_FORMAT_ASTC_8x6_SRGB_BLOCK:170,VK_FORMAT_ASTC_8x8_UNORM_BLOCK:171,VK_FORMAT_ASTC_8x8_SRGB_BLOCK:172,VK_FORMAT_ASTC_10x5_UNORM_BLOCK:173,VK_FORMAT_ASTC_10x5_SRGB_BLOCK:174,VK_FORMAT_ASTC_10x6_UNORM_BLOCK:175,VK_FORMAT_ASTC_10x6_SRGB_BLOCK:176,VK_FORMAT_ASTC_10x8_UNORM_BLOCK:177,VK_FORMAT_ASTC_10x8_SRGB_BLOCK:178,VK_FORMAT_ASTC_10x10_UNORM_BLOCK:179,VK_FORMAT_ASTC_10x10_SRGB_BLOCK:180,VK_FORMAT_ASTC_12x10_UNORM_BLOCK:181,VK_FORMAT_ASTC_12x10_SRGB_BLOCK:182,VK_FORMAT_ASTC_12x12_UNORM_BLOCK:183,VK_FORMAT_ASTC_12x12_SRGB_BLOCK:184,VK_FORMAT_G8B8G8R8_422_UNORM:1000156e3,VK_FORMAT_B8G8R8G8_422_UNORM:1000156001,VK_FORMAT_G8_B8_R8_3PLANE_420_UNORM:1000156002,VK_FORMAT_G8_B8R8_2PLANE_420_UNORM:1000156003,VK_FORMAT_G8_B8_R8_3PLANE_422_UNORM:1000156004,VK_FORMAT_G8_B8R8_2PLANE_422_UNORM:1000156005,VK_FORMAT_G8_B8_R8_3PLANE_444_UNORM:1000156006,VK_FORMAT_R10X6_UNORM_PACK16:1000156007,VK_FORMAT_R10X6G10X6_UNORM_2PACK16:1000156008,VK_FORMAT_R10X6G10X6B10X6A10X6_UNORM_4PACK16:1000156009,VK_FORMAT_G10X6B10X6G10X6R10X6_422_UNORM_4PACK16:1000156010,VK_FORMAT_B10X6G10X6R10X6G10X6_422_UNORM_4PACK16:1000156011,VK_FORMAT_G10X6_B10X6_R10X6_3PLANE_420_UNORM_3PACK16:1000156012,VK_FORMAT_G10X6_B10X6R10X6_2PLANE_420_UNORM_3PACK16:1000156013,VK_FORMAT_G10X6_B10X6_R10X6_3PLANE_422_UNORM_3PACK16:1000156014,VK_FORMAT_G10X6_B10X6R10X6_2PLANE_422_UNORM_3PACK16:1000156015,VK_FORMAT_G10X6_B10X6_R10X6_3PLANE_444_UNORM_3PACK16:1000156016,VK_FORMAT_R12X4_UNORM_PACK16:1000156017,VK_FORMAT_R12X4G12X4_UNORM_2PACK16:1000156018,VK_FORMAT_R12X4G12X4B12X4A12X4_UNORM_4PACK16:1000156019,VK_FORMAT_G12X4B12X4G12X4R12X4_422_UNORM_4PACK16:1000156020,VK_FORMAT_B12X4G12X4R12X4G12X4_422_UNORM_4PACK16:1000156021,VK_FORMAT_G12X4_B12X4_R12X4_3PLANE_420_UNORM_3PACK16:1000156022,VK_FORMAT_G12X4_B12X4R12X4_2PLANE_420_UNORM_3PACK16:1000156023,VK_FORMAT_G12X4_B12X4_R12X4_3PLANE_422_UNORM_3PACK16:1000156024,VK_FORMAT_G12X4_B12X4R12X4_2PLANE_422_UNORM_3PACK16:1000156025,VK_FORMAT_G12X4_B12X4_R12X4_3PLANE_444_UNORM_3PACK16:1000156026,VK_FORMAT_G16B16G16R16_422_UNORM:1000156027,VK_FORMAT_B16G16R16G16_422_UNORM:1000156028,VK_FORMAT_G16_B16_R16_3PLANE_420_UNORM:1000156029,VK_FORMAT_G16_B16R16_2PLANE_420_UNORM:1000156030,VK_FORMAT_G16_B16_R16_3PLANE_422_UNORM:1000156031,VK_FORMAT_G16_B16R16_2PLANE_422_UNORM:1000156032,VK_FORMAT_G16_B16_R16_3PLANE_444_UNORM:1000156033,VK_FORMAT_PVRTC1_2BPP_UNORM_BLOCK_IMG:1000054e3,VK_FORMAT_PVRTC1_4BPP_UNORM_BLOCK_IMG:1000054001,VK_FORMAT_PVRTC2_2BPP_UNORM_BLOCK_IMG:1000054002,VK_FORMAT_PVRTC2_4BPP_UNORM_BLOCK_IMG:1000054003,VK_FORMAT_PVRTC1_2BPP_SRGB_BLOCK_IMG:1000054004,VK_FORMAT_PVRTC1_4BPP_SRGB_BLOCK_IMG:1000054005,VK_FORMAT_PVRTC2_2BPP_SRGB_BLOCK_IMG:1000054006,VK_FORMAT_PVRTC2_4BPP_SRGB_BLOCK_IMG:1000054007,VK_FORMAT_ASTC_4x4_SFLOAT_BLOCK_EXT:1000066e3,VK_FORMAT_ASTC_5x4_SFLOAT_BLOCK_EXT:1000066001,VK_FORMAT_ASTC_5x5_SFLOAT_BLOCK_EXT:1000066002,VK_FORMAT_ASTC_6x5_SFLOAT_BLOCK_EXT:1000066003,VK_FORMAT_ASTC_6x6_SFLOAT_BLOCK_EXT:1000066004,VK_FORMAT_ASTC_8x5_SFLOAT_BLOCK_EXT:1000066005,VK_FORMAT_ASTC_8x6_SFLOAT_BLOCK_EXT:1000066006,VK_FORMAT_ASTC_8x8_SFLOAT_BLOCK_EXT:1000066007,VK_FORMAT_ASTC_10x5_SFLOAT_BLOCK_EXT:1000066008,VK_FORMAT_ASTC_10x6_SFLOAT_BLOCK_EXT:1000066009,VK_FORMAT_ASTC_10x8_SFLOAT_BLOCK_EXT:1000066010,VK_FORMAT_ASTC_10x10_SFLOAT_BLOCK_EXT:1000066011,VK_FORMAT_ASTC_12x10_SFLOAT_BLOCK_EXT:1000066012,VK_FORMAT_ASTC_12x12_SFLOAT_BLOCK_EXT:1000066013,VK_FORMAT_G8B8G8R8_422_UNORM_KHR:1000156e3,VK_FORMAT_B8G8R8G8_422_UNORM_KHR:1000156001,VK_FORMAT_G8_B8_R8_3PLANE_420_UNORM_KHR:1000156002,VK_FORMAT_G8_B8R8_2PLANE_420_UNORM_KHR:1000156003,VK_FORMAT_G8_B8_R8_3PLANE_422_UNORM_KHR:1000156004,VK_FORMAT_G8_B8R8_2PLANE_422_UNORM_KHR:1000156005,VK_FORMAT_G8_B8_R8_3PLANE_444_UNORM_KHR:1000156006,VK_FORMAT_R10X6_UNORM_PACK16_KHR:1000156007,VK_FORMAT_R10X6G10X6_UNORM_2PACK16_KHR:1000156008,VK_FORMAT_R10X6G10X6B10X6A10X6_UNORM_4PACK16_KHR:1000156009,VK_FORMAT_G10X6B10X6G10X6R10X6_422_UNORM_4PACK16_KHR:1000156010,VK_FORMAT_B10X6G10X6R10X6G10X6_422_UNORM_4PACK16_KHR:1000156011,VK_FORMAT_G10X6_B10X6_R10X6_3PLANE_420_UNORM_3PACK16_KHR:1000156012,VK_FORMAT_G10X6_B10X6R10X6_2PLANE_420_UNORM_3PACK16_KHR:1000156013,VK_FORMAT_G10X6_B10X6_R10X6_3PLANE_422_UNORM_3PACK16_KHR:1000156014,VK_FORMAT_G10X6_B10X6R10X6_2PLANE_422_UNORM_3PACK16_KHR:1000156015,VK_FORMAT_G10X6_B10X6_R10X6_3PLANE_444_UNORM_3PACK16_KHR:1000156016,VK_FORMAT_R12X4_UNORM_PACK16_KHR:1000156017,VK_FORMAT_R12X4G12X4_UNORM_2PACK16_KHR:1000156018,VK_FORMAT_R12X4G12X4B12X4A12X4_UNORM_4PACK16_KHR:1000156019,VK_FORMAT_G12X4B12X4G12X4R12X4_422_UNORM_4PACK16_KHR:1000156020,VK_FORMAT_B12X4G12X4R12X4G12X4_422_UNORM_4PACK16_KHR:1000156021,VK_FORMAT_G12X4_B12X4_R12X4_3PLANE_420_UNORM_3PACK16_KHR:1000156022,VK_FORMAT_G12X4_B12X4R12X4_2PLANE_420_UNORM_3PACK16_KHR:1000156023,VK_FORMAT_G12X4_B12X4_R12X4_3PLANE_422_UNORM_3PACK16_KHR:1000156024,VK_FORMAT_G12X4_B12X4R12X4_2PLANE_422_UNORM_3PACK16_KHR:1000156025,VK_FORMAT_G12X4_B12X4_R12X4_3PLANE_444_UNORM_3PACK16_KHR:1000156026,VK_FORMAT_G16B16G16R16_422_UNORM_KHR:1000156027,VK_FORMAT_B16G16R16G16_422_UNORM_KHR:1000156028,VK_FORMAT_G16_B16_R16_3PLANE_420_UNORM_KHR:1000156029,VK_FORMAT_G16_B16R16_2PLANE_420_UNORM_KHR:1000156030,VK_FORMAT_G16_B16_R16_3PLANE_422_UNORM_KHR:1000156031,VK_FORMAT_G16_B16R16_2PLANE_422_UNORM_KHR:1000156032,VK_FORMAT_G16_B16_R16_3PLANE_444_UNORM_KHR:1000156033},Le=Object.freeze(Rr);var Nt=class{constructor(){this.vkFormat=0,this.typeSize=1,this.pixelWidth=0,this.pixelHeight=0,this.pixelDepth=0,this.layerCount=0,this.faceCount=1,this.supercompressionScheme=0,this.levels=[],this.dataFormatDescriptor=[{vendorId:0,descriptorType:0,descriptorBlockSize:0,versionNumber:2,colorModel:0,colorPrimaries:1,transferFunction:2,flags:0,texelBlockDimension:[0,0,0,0],bytesPlane:[0,0,0,0,0,0,0,0],samples:[]}],this.keyValue={},this.globalData=null}},Oe=class{constructor(T,r,C,M){this._dataView=void 0,this._littleEndian=void 0,this._offset=void 0,this._dataView=new DataView(T.buffer,T.byteOffset+r,C),this._littleEndian=M,this._offset=0}_nextUint8(){let T=this._dataView.getUint8(this._offset);return this._offset+=1,T}_nextUint16(){let T=this._dataView.getUint16(this._offset,this._littleEndian);return this._offset+=2,T}_nextUint32(){let T=this._dataView.getUint32(this._offset,this._littleEndian);return this._offset+=4,T}_nextUint64(){let T=this._dataView.getUint32(this._offset,this._littleEndian),r=this._dataView.getUint32(this._offset+4,this._littleEndian),C=T+2**32*r;return this._offset+=8,C}_nextInt32(){let T=this._dataView.getInt32(this._offset,this._littleEndian);return this._offset+=4,T}_nextUint8Array(T){let r=new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+this._offset,T);return this._offset+=T,r}_skip(T){return this._offset+=T,this}_scan(T,r=0){let C=this._offset,M=0;for(;this._dataView.getUint8(this._offset)!==r&&M<T;)M++,this._offset++;return M<T&&this._offset++,new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+C,M)}};var dr=new Uint8Array([0]),w=[171,75,84,88,32,50,48,187,13,10,26,10];function sn(s){return new TextDecoder().decode(s)}function on(s){let T=new Uint8Array(s.buffer,s.byteOffset,w.length);if(T[0]!==w[0]||T[1]!==w[1]||T[2]!==w[2]||T[3]!==w[3]||T[4]!==w[4]||T[5]!==w[5]||T[6]!==w[6]||T[7]!==w[7]||T[8]!==w[8]||T[9]!==w[9]||T[10]!==w[10]||T[11]!==w[11])throw new Error("Missing KTX 2.0 identifier.");let r=new Nt,C=17*Uint32Array.BYTES_PER_ELEMENT,M=new Oe(s,w.length,C,!0);r.vkFormat=M._nextUint32(),r.typeSize=M._nextUint32(),r.pixelWidth=M._nextUint32(),r.pixelHeight=M._nextUint32(),r.pixelDepth=M._nextUint32(),r.layerCount=M._nextUint32(),r.faceCount=M._nextUint32();let P=M._nextUint32();r.supercompressionScheme=M._nextUint32();let F=M._nextUint32(),v=M._nextUint32(),y=M._nextUint32(),D=M._nextUint32(),N=M._nextUint64(),d=M._nextUint64(),E=P*3*8,Q=new Oe(s,w.length+C,E,!0);for(let L=0;L<P;L++)r.levels.push({levelData:new Uint8Array(s.buffer,s.byteOffset+Q._nextUint64(),Q._nextUint64()),uncompressedByteLength:Q._nextUint64()});let O=new Oe(s,F,v,!0),X={vendorId:O._skip(4)._nextUint16(),descriptorType:O._nextUint16(),versionNumber:O._nextUint16(),descriptorBlockSize:O._nextUint16(),colorModel:O._nextUint8(),colorPrimaries:O._nextUint8(),transferFunction:O._nextUint8(),flags:O._nextUint8(),texelBlockDimension:[O._nextUint8(),O._nextUint8(),O._nextUint8(),O._nextUint8()],bytesPlane:[O._nextUint8(),O._nextUint8(),O._nextUint8(),O._nextUint8(),O._nextUint8(),O._nextUint8(),O._nextUint8(),O._nextUint8()],samples:[]},W=(X.descriptorBlockSize/4-6)/4;for(let L=0;L<W;L++){let j={bitOffset:O._nextUint16(),bitLength:O._nextUint8(),channelType:O._nextUint8(),samplePosition:[O._nextUint8(),O._nextUint8(),O._nextUint8(),O._nextUint8()],sampleLower:-1/0,sampleUpper:1/0};j.channelType&64?(j.sampleLower=O._nextInt32(),j.sampleUpper=O._nextInt32()):(j.sampleLower=O._nextUint32(),j.sampleUpper=O._nextUint32()),X.samples[L]=j}r.dataFormatDescriptor.length=0,r.dataFormatDescriptor.push(X);let J=new Oe(s,y,D,!0);for(;J._offset<D;){let L=J._nextUint32(),j=J._scan(L),Ae=sn(j);if(r.keyValue[Ae]=J._nextUint8Array(L-j.byteLength-1),Ae.match(/^ktx/i)){let xe=sn(r.keyValue[Ae]);r.keyValue[Ae]=xe.substring(0,xe.lastIndexOf("\0"))}let at=L%4?4-L%4:0;J._skip(at)}if(d<=0)return r;let g=new Oe(s,N,d,!0),Fe=g._nextUint16(),it=g._nextUint16(),ee=g._nextUint32(),De=g._nextUint32(),Ie=g._nextUint32(),ae=g._nextUint32(),ot=[];for(let L=0;L<P;L++)ot.push({imageFlags:g._nextUint32(),rgbSliceByteOffset:g._nextUint32(),rgbSliceByteLength:g._nextUint32(),alphaSliceByteOffset:g._nextUint32(),alphaSliceByteLength:g._nextUint32()});let ce=N+g._offset,de=ce+ee,be=de+De,Se=be+Ie,we=new Uint8Array(s.buffer,s.byteOffset+ce,ee),He=new Uint8Array(s.buffer,s.byteOffset+de,De),Xe=new Uint8Array(s.buffer,s.byteOffset+be,Ie),Rt=new Uint8Array(s.buffer,s.byteOffset+Se,ae);return r.globalData={endpointCount:Fe,selectorCount:it,imageDescs:ot,endpointsData:we,selectorsData:He,tablesData:Xe,extendedData:Rt},r}var an=or(Rn(),1),cn=["positiveX","negativeX","positiveY","negativeY","positiveZ","negativeZ"],An=163,Tn=166,me;function ar(s,T){nn.typeOf.object("transcoderModule",me);let r=s.ktx2Buffer,C=s.supportedTargetFormats,M;try{M=on(r)}catch{throw new se("Invalid KTX2 file.")}if(M.layerCount!==0)throw new se("KTX2 texture arrays are not supported.");if(M.pixelDepth!==0)throw new se("KTX2 3D textures are unsupported.");let P=M.dataFormatDescriptor[0],F=new Array(M.levelCount);return M.vkFormat===0&&(P.colorModel===An||P.colorModel===Tn)?Ar(r,M,C,me,T,F):(T.push(r.buffer),cr(M,F)),F}function cr(s,T){let r=s.vkFormat===Le.VK_FORMAT_R8G8B8_SRGB?p.RGB:p.RGBA,C;s.vkFormat===Le.VK_FORMAT_R8G8B8A8_UNORM?C=m.UNSIGNED_BYTE:s.vkFormat===Le.VK_FORMAT_R16G16B16A16_SFLOAT?C=m.HALF_FLOAT:s.vkFormat===Le.VK_FORMAT_R32G32B32A32_SFLOAT&&(C=m.FLOAT);for(let M=0;M<s.levels.length;++M){let P={};T[M]=P;let F=s.levels[M].levelData,v=s.pixelWidth>>M,y=s.pixelHeight>>M,D=v*y*p.componentsLength(r);for(let N=0;N<s.faceCount;++N){let d=F.byteOffset+D*s.typeSize*N,E;!ge(C)||m.sizeInBytes(C)===1?E=new Uint8Array(F.buffer,d,D):m.sizeInBytes(C)===2?E=new Uint16Array(F.buffer,d,D):E=new Float32Array(F.buffer,d,D),P[cn[N]]={internalFormat:r,datatype:C,width:v,height:y,levelBuffer:E}}}}function Ar(s,T,r,C,M,P){let F=new C.KTX2File(s),v=F.getWidth(),y=F.getHeight(),D=F.getLevels(),N=F.getHasAlpha();if(!(v>0)||!(y>0)||!(D>0))throw F.close(),F.delete(),new se("Invalid KTX2 file");let d,E,Q=T.dataFormatDescriptor[0],O=C.transcoder_texture_format;if(Q.colorModel===An)if(r.etc)d=N?p.RGBA8_ETC2_EAC:p.RGB8_ETC2,E=N?O.cTFETC2_RGBA:O.cTFETC1_RGB;else if(r.etc1&&!N)d=p.RGB_ETC1,E=O.cTFETC1_RGB;else if(r.s3tc)d=N?p.RGBA_DXT5:p.RGB_DXT1,E=N?O.cTFBC3_RGBA:O.cTFBC1_RGB;else if(r.pvrtc)d=N?p.RGBA_PVRTC_4BPPV1:p.RGB_PVRTC_4BPPV1,E=N?O.cTFPVRTC1_4_RGBA:O.cTFPVRTC1_4_RGB;else if(r.astc)d=p.RGBA_ASTC,E=O.cTFASTC_4x4_RGBA;else if(r.bc7)d=p.RGBA_BC7,E=O.cTFBC7_RGBA;else throw new se("No transcoding format target available for ETC1S compressed ktx2.");else if(Q.colorModel===Tn)if(r.astc)d=p.RGBA_ASTC,E=O.cTFASTC_4x4_RGBA;else if(r.bc7)d=p.RGBA_BC7,E=O.cTFBC7_RGBA;else if(r.s3tc)d=N?p.RGBA_DXT5:p.RGB_DXT1,E=N?O.cTFBC3_RGBA:O.cTFBC1_RGB;else if(r.etc)d=N?p.RGBA8_ETC2_EAC:p.RGB8_ETC2,E=N?O.cTFETC2_RGBA:O.cTFETC1_RGB;else if(r.etc1&&!N)d=p.RGB_ETC1,E=O.cTFETC1_RGB;else if(r.pvrtc)d=N?p.RGBA_PVRTC_4BPPV1:p.RGB_PVRTC_4BPPV1,E=N?O.cTFPVRTC1_4_RGBA:O.cTFPVRTC1_4_RGB;else throw new se("No transcoding format target available for UASTC compressed ktx2.");if(!F.startTranscoding())throw F.close(),F.delete(),new se("startTranscoding() failed");for(let X=0;X<T.levels.length;++X){let ie={};P[X]=ie,v=T.pixelWidth>>X,y=T.pixelHeight>>X;let le=F.getImageTranscodedSizeInBytes(X,0,0,E.value),W=new Uint8Array(le),J=F.transcodeImage(W,X,0,0,E.value,0,-1,-1);if(!ge(J))throw new se("transcodeImage() failed.");M.push(W.buffer),ie[cn[0]]={internalFormat:d,width:v,height:y,levelBuffer:W}}return F.close(),F.delete(),P}async function Tr(s,T){let r=s.webAssemblyConfig,C=_n(an.default,self.BASIS);return ge(r.wasmBinaryFile)?me=await C(r):me=await C(),me.initializeBasis(),!0}function fr(s,T){let r=s.webAssemblyConfig;return ge(r)?Tr(s,T):ar(s,T)}var yr=rn(fr);export{yr as default};
